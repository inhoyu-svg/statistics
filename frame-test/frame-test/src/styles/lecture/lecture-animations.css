/* ===== 강조 효과 ===== */
.focus-highlight {
    box-shadow: 0 0 30px rgba(255, 193, 7, 0.8);
    transform: scale(1.05);
    z-index: 10;
    position: relative;
}

/* ===== 텍스트 애니메이션 ===== */
.text-animate-in {
    opacity: 0;
    transform: translateY(clamp(-7px, -0.625vw - 2.5px, -10px));
    transition: opacity 0.8s ease-out, transform 0.8s ease-out;
}

.math-scene.today-scene .text-animate-in {
    margin-bottom: clamp(45px, 3.75vw + 15px, 60px);
}

.math-scene.today-scene .text-animate-in:last-of-type {
    margin-bottom: 0;
}

/* Math Scene SVG border 스타일 (공통) */
.math-scene .border-svg {
    position: absolute;
    top: -2px;
    left: -2px;
    right: -2px;
    bottom: -2px;
    pointer-events: none;
    z-index: -1;
    transition: opacity 0.8s ease-out;
}

.math-scene .border-svg svg {
    width: 100%;
    height: 100%;
    preserveAspectRatio: none;
}

.math-scene .border-svg path {
    stroke-width: 3;
    fill: none;
    stroke-linecap: round;
    stroke-linejoin: round;
}

/* Today Scene SVG border 스타일 */
.math-scene.today-scene .border-svg path {
    stroke: #A2FF72;
    stroke-width: 3;
}

/* Today Scene theme별 stroke-width */
.math-scene.theme-green.today-scene .border-svg path {
    stroke-width: 3;
}

.math-scene.theme-yellow.today-scene .border-svg path {
    stroke-width: 3;
}

.math-scene.theme-red.today-scene .border-svg path {
    stroke-width: 3;
}

/* Number Scene SVG border 스타일 */
.math-scene.number-scene .border-svg path {
    stroke-width: 3;
}

/* Theme별 SVG border 색상 */
.math-scene.theme-green .border-svg path {
    stroke: #A2FF72;
}

.math-scene.theme-yellow .border-svg path {
    stroke: #FFD34F;
}

.math-scene.theme-red .border-svg path {
    stroke: #FF4F87;
}

.math-scene.summary-scene .border-svg path {
    stroke: #DB6FE7;
    stroke-width: 3;
}

/* Review Scene SVG border 색상 */
.math-scene.review-scene .border-svg path {
    stroke: #43A4F6;
    stroke-width: 3;
}

/* Math Scene 테두리 애니메이션 (공통) */
.math-scene.border-animate,
.math-scene.theme-green.border-animate,
.math-scene.theme-yellow.border-animate,
.math-scene.theme-red.border-animate,
.math-scene.theme-green.today-scene.border-animate,
.math-scene.theme-yellow.today-scene.border-animate,
.math-scene.theme-red.today-scene.border-animate,
.math-scene.theme-green.number-scene.border-animate,
.math-scene.theme-yellow.number-scene.border-animate,
.math-scene.theme-red.number-scene.border-animate,
.math-scene.summary-scene.border-animate,
.math-scene.review-scene.border-animate {
    border-color: transparent;
}

.math-scene.border-animate .border-svg path {
    animation: drawBorder 1s ease-out forwards;
}

@keyframes drawBorder {
    from {
        stroke-dasharray: 0 var(--path-length, 1000);
    }

    to {
        stroke-dasharray: var(--path-length, 1000) 0;
    }
}

.text-animate-in.show {
    opacity: 1;
    transform: translateY(0);
}

/* ===== 프레임 전환 효과 ===== */

/* 좌우 슬라이드 */
.frame-transition-slide-left {
    animation: slideInLeft 0.8s ease-out;
}

.frame-transition-slide-right {
    animation: slideInRight 0.8s ease-out;
}

.frame-transition-slide-left.exiting {
    animation: slideOutLeft 0.8s ease-in;
}

.frame-transition-slide-right.exiting {
    animation: slideOutRight 0.8s ease-in;
}

/* 상하 슬라이드 */
.frame-transition-slide-up {
    animation: slideInUp 0.8s ease-out;
}

.frame-transition-slide-down {
    animation: slideInDown 0.8s ease-out;
}

.frame-transition-slide-up.exiting {
    animation: slideOutUp 0.8s ease-in;
}

.frame-transition-slide-down.exiting {
    animation: slideOutDown 0.8s ease-in;
}

/* 페이드 */
.frame-transition-fade {
    animation: fadeIn 0.8s ease-out;
}

.frame-transition-fade.exiting {
    animation: fadeOut 0.8s ease-out;
}

/* 프레임 fade 애니메이션 (마지막 프레임 전환용) */
.frame-fade-in {
    animation: fadeIn 0.8s ease-out;
}

.frame-fade-out {
    animation: fadeOut 0.8s ease-out;
}

/* 애니메이션 정의 */
@keyframes slideInLeft {
    from {
        transform: translateX(-100%);
        opacity: 0;
    }

    to {
        transform: translateX(0);
        opacity: 1;
    }
}

@keyframes slideOutLeft {
    from {
        transform: translateX(0);
        opacity: 1;
    }

    to {
        transform: translateX(-100%);
        opacity: 0;
    }
}

@keyframes slideInRight {
    from {
        transform: translateX(100%);
        opacity: 0;
    }

    to {
        transform: translateX(0);
        opacity: 1;
    }
}

@keyframes slideOutRight {
    from {
        transform: translateX(0);
        opacity: 1;
    }

    to {
        transform: translateX(100%);
        opacity: 0;
    }
}

@keyframes slideInUp {
    from {
        transform: translateY(-100%);
        opacity: 0;
    }

    to {
        transform: translateY(0);
        opacity: 1;
    }
}

@keyframes slideOutUp {
    from {
        transform: translateY(0);
        opacity: 1;
    }

    to {
        transform: translateY(-100%);
        opacity: 0;
    }
}

@keyframes slideInDown {
    from {
        transform: translateY(100%);
        opacity: 0;
    }

    to {
        transform: translateY(0);
        opacity: 1;
    }
}

@keyframes slideOutDown {
    from {
        transform: translateY(0);
        opacity: 1;
    }

    to {
        transform: translateY(100%);
        opacity: 0;
    }
}

@keyframes fadeIn {
    from {
        opacity: 0;
    }

    to {
        opacity: 1;
    }
}

@keyframes fadeOut {
    from {
        opacity: 1;
    }

    to {
        opacity: 0;
    }
}

/* ===== 배경 원 회전 애니메이션 ===== */
@keyframes rotateAroundCircle {
    from {
        transform: rotate(0deg);
    }

    to {
        transform: rotate(360deg);
    }
}

@keyframes rotateAroundCircleReverse {
    from {
        transform: rotate(360deg);
    }

    to {
        transform: rotate(0deg);
    }
}

/* ===== 글자별 순차 애니메이션 (슬라이드업) ===== */
@keyframes charRevealSlideUp {
    0% {
        opacity: 0;
        transform: translateY(32px) scale(0.3);
    }

    50% {
        opacity: 1;
        transform: translateY(8px) scale(0.9);
    }

    75% {
        opacity: 1;
        transform: translateY(-4px) scale(1.05);
    }

    100% {
        opacity: 1;
        transform: translateY(0) scale(1);
    }
}

@keyframes reviewKeywordSlideUp {
    0% {
        opacity: 0;
        transform: translateY(40px);
    }

    100% {
        opacity: 1;
        transform: translateY(0);
    }
}

@keyframes stepItemSlideIn {
    from {
        opacity: 0;
        transform: translateX(-70px);
    }

    to {
        opacity: 1;
        transform: translateX(0);
    }
}

/* ===== 배경 원 fade-in ===== */
@keyframes bgCircleFadeIn {
    from {
        opacity: 0;
    }

    to {
        opacity: 1;
    }
}
